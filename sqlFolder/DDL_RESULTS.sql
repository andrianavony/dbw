START TRANSACTION;
SET foreign_key_checks = 0;

DROP TABLE IF EXISTS `RESULTS`;
CREATE TABLE IF NOT EXISTS `RESULTS` (
 `IDRESULT` bigint(20) NULL AUTO_INCREMENT,
`IDMEASURE` bigint(20) NULL ,

  `IDANALYSIS` bigint(20) NULL ,
  `IDMODELANALYSIS` bigint(20) NULL,

  `IDMETHOD` bigint(20) NULL,
`IDMETHODDETAILS` bigint(20) NULL ,

`IDSPECIFICATION` bigint(20),

`IDSAMPLES` bigint(20) NULL,
`IDBATCH` bigint(20) NULL,
`BATCHNAME`       varchar(50) NULL,
`IDSTATUS` tinyint(1) NULL,

  `DESCRIPTION`     varchar(50) NULL,
 
  `ISVIRTUAL` tinyint(1) NULL,
  `ISFINAL` tinyint(1) NULL,
  `ISRESULTS` tinyint(1) NULL,
  `ISREQUIRED` tinyint(1) NULL,
  `OCCURENCE` smallint(6) NULL,
  `COUNTERANALYSIS` smallint(6) NULL,
  `OFFICIALENAME` varchar(50) NULL,
  `MAINGROUP` varchar(50) NULL,
  `SUBGROUP` varchar(50) NULL,
  `MEASUREMASTER` varchar(50) NULL,
  `MEASUREDETAILS` varchar(50) NULL,
  `REPETITION` smallint(6) NULL,
  `SUBREPETITION` smallint(6) NULL,
  `RAWRESULTS` varchar(50) NULL,
  `FORMATED` varchar(50) NULL,
  `APPORVED` tinyint(1) NULL,
  `APPORVEDDATE` datetime NULL,
  `APPORVEDBY` varchar(50) NULL,
  `DATEOFENTRY` datetime NULL,
  `IDUSER` bigint(20) NULL,
  `HERITED` tinyint(1) NULL,
PRIMARY KEY (`IDRESULT`), 
KEY `IDBATCH` (`IDBATCH`),
KEY `BATCHNAME` (`BATCHNAME`),
KEY `IDSAMPLES` (`IDSAMPLES`),

KEY `IDSPECIFICATION` (`IDSPECIFICATION`),
KEY `IDANALYSIS` (`IDANALYSIS` ),
KEY `IDMODELANALYSIS` (`IDMODELANALYSIS`),
KEY `IDMETHOD` (`IDMETHOD`),
KEY `IDMETHODDETAILS` (`IDMETHODDETAILS`),
KEY `KEY_RESULTS_IDMEASURE`  (`IDMEASURE` ),
KEY `IDUSER`  (`IDUSER` )
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

COMMIT;

/*
ALTER TABLE `results` ADD CONSTRAINT `FK_FORIDRESULTS_IDMEASURE` 
    FOREIGN KEY                             (`IDMEASURE`) 
    REFERENCES `measure`                    (`IDMEASURE`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;
*/


START TRANSACTION;
ALTER TABLE `results` ADD CONSTRAINT `FK_FORIDRESULTS_IDMEASURE` 
FOREIGN KEY (`IDMEASURE`) REFERENCES `measures`(`IDMEASURE`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;

START TRANSACTION;
ALTER TABLE `RESULTS` ADD CONSTRAINT `FK_IDRESULTS_IDUSER` 
    FOREIGN KEY                             (`IDUSER`) 
    REFERENCES `user`                    (`IDUSER`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;



START TRANSACTION;
ALTER TABLE `RESULTS` 
    ADD CONSTRAINT `FK_RESULTS_IDMODELANALYSIS` 
    FOREIGN KEY                 (`IDMODELANALYSIS`) 
    REFERENCES `modelanalysis`  (`IDMODELANALYSIS`)
 ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;


START TRANSACTION;
ALTER TABLE `RESULTS` 
ADD CONSTRAINT                      `FK_RESULTS_IDANALYSIS` 
FOREIGN KEY                                 (`IDANALYSIS`) 
REFERENCES `analysis`                       (`IDANALYSIS`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;

START TRANSACTION;
ALTER TABLE                              `RESULTS`
ADD CONSTRAINT                          `FK_RESULTS_IDMETHOD` 
FOREIGN KEY                                     (`IDMETHOD`) 
REFERENCES                              `method` (`IDMETHOD`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;


START TRANSACTION;
ALTER TABLE `RESULTS` 
ADD CONSTRAINT `FK_RESULTS_IDBATCH` 
FOREIGN KEY (`IDBATCH`) 
    REFERENCES `batch`(`IDBATCH`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;



START TRANSACTION;
ALTER TABLE `RESULTS` ADD CONSTRAINT `FK_RESULTS_IDSPECIFICATION` 
FOREIGN KEY (`IDSPECIFICATION`)
REFERENCES `specification`(`IDSPECIFICATION`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;

START TRANSACTION;
ALTER TABLE `RESULTS` 
ADD CONSTRAINT `FK_RESULTS_IDSAMPLES` 
FOREIGN KEY (`IDSAMPLES`) 
REFERENCES `samples`(`IDSAMPLES`) 
ON DELETE RESTRICT ON UPDATE RESTRICT;
COMMIT;


SET foreign_key_checks = 1;